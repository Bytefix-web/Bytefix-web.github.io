<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bytefix - Tech Support & Community Literacy</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for modern typography -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Basic reset for consistent styling */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      /* Apply Inter font family globally */
      body {
        font-family: "Inter", sans-serif;
        /* Gentle background color */
        background-color: #e0e7ff; /* A very light, soft blue-purple */
        color: #374151; /* Dark gray for text for readability */
      }
      /* The .pane class for large elements, giving them a distinct, soft look */
      .pane {
        background-color: rgba(
          255,
          255,
          255,
          0.7
        ); /* Slightly transparent white */
        border: 1px solid #c7d2fe; /* Light indigo border */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); /* Soft shadow */
        border-radius: 1rem; /* Rounded corners for all panes */
      }
      /* Custom background for the main hero section */
      .main-bg {
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }
    </style>
  </head>
  <body class="antialiased">
    <!-- Header Section - Top navigation and branding -->
    <header
      class="pane w-full p-4 md:p-6 flex flex-col md:flex-row justify-between items-center mb-8 md:mb-12 mx-auto max-w-7xl mt-4 md:mt-8"
    >
      <!-- Site Title -->
      <h1 class="text-4xl md:text-5xl font-bold text-indigo-700 mb-4 md:mb-0">
        Bytefix
      </h1>
      <!-- Navigation Menu -->
      <nav>
        <ul
          class="flex flex-wrap justify-center gap-4 md:gap-8 text-lg md:text-xl"
        >
          <li>
            <a
              href="#about"
              class="text-gray-700 hover:text-indigo-600 transition duration-300 ease-in-out font-medium"
              >About Us</a
            >
          </li>
          <li>
            <a
              href="#goals"
              class="text-gray-700 hover:text-indigo-600 transition duration-300 ease-in-out font-medium"
              >Our Goals</a
            >
          </li>
          <li>
            <a
              href="#availability"
              class="text-gray-700 hover:text-indigo-600 transition duration-300 ease-in-out font-medium"
              >Where We Are</a
            >
          </li>
          <li>
            <a
              href="#contact"
              class="text-gray-700 hover:text-indigo-600 transition duration-300 ease-in-out font-medium"
              >Get Help</a
            >
          </li>
          <li>
            <a
              href="./volunteers_signin.html"
              class="text-gray-700 hover:text-indigo-600 transition duration-300 ease-in-out font-medium"
              >Volunteers</a
            >
          </li>
        </ul>
      </nav>
    </header>

    <!-- Main Hero Section - Empowering Communities Message -->
    <main
      class="pane main-bg h-auto py-20 px-4 md:px-8 text-center flex items-center justify-center mb-8 md:mb-12 mx-auto max-w-7xl"
    >
      <div class="bg-white bg-opacity-80 p-8 rounded-lg shadow-xl max-w-2xl">
        <h2
          class="text-4xl md:text-5xl font-bold text-indigo-800 mb-4 md:mb-6 leading-tight"
        >
          Volunteers Sign In
        </h2>
        <!-- Volunteer Sign In Form with Email and Password -->
        <form action="">
          <div class="mb-4">
            <label for="Email" class="block text-lg font-semibold mb-2"
              >Email:</label
            >
            <input
              type="text"
              id="Email"
              name="Email"
              class="w-full p-2 border border-gray-300 rounded-lg"
            />
          </div>
          <div class="mb-4">
            <label for="password" class="block text-lg font-semibold mb-2"
              >Password:</label
            >
            <input
              type="password"
              id="password"
              name="password"
              class="w-full p-2 border border-gray-300 rounded-lg"
            />
          </div>
          <button
            type="submit"
            class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-md shadow-lg hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105"
          >
            Sign In
          </button>
        </form>
      </div>
    </main>

    <!-- Footer Section -->
    <footer
      class="pane py-8 px-4 md:px-8 text-center text-gray-700 text-md mx-auto max-w-7xl mb-4"
    >
      <div class="max-w-6xl mx-auto space-y-2">
        <p>&copy; 2025 Bytefix. All rights reserved.</p>
        <p>Empowering communities, one fix at a time.</p>
      </div>
    </footer>
  </body>

<script type="module">
  // Import the functions you need from the SDKs you need
  // Use the specific CDN URL for the authentication module
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";
  import {
    getAuth,
    signInWithEmailAndPassword,
    onAuthStateChanged,
  } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js"; // Corrected import for auth

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDk5berY8qJUp01H7CgfAGief-gFHBFvNA",
    authDomain: "bytefix-ec15b.firebaseapp.com",
    projectId: "bytefix-ec15b",
    storageBucket: "bytefix-ec15b.firebasestorage.app",
    messagingSenderId: "505385365834",
    appId: "1:505385365834:web:30cb0dfed96cdabe6551b3",
    measurementId: "G-05RJS0F69F",
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

  // Assuming 'app' is your initialized Firebase app instance (e.g., from initializeApp(firebaseConfig);)
  // If 'app' isn't globally available, make sure to get it or pass it.
  // Example: const app = initializeApp(firebaseConfig);
  const auth = getAuth(app); // Get the Auth service instance from your app

  // 2. Get references to your HTML form elements
  const EmailInput = document.getElementById("Email");
  const passwordInput = document.getElementById("password");
  const signInButton = document.querySelector('button[type="submit"]'); // Selects your Sign In button

  // Optional: A place in your HTML to display messages (e.g., success, errors)
  // You might want to add <p id="auth-message"></p> somewhere in your HTML
  const authMessage = document.getElementById("auth-message");
  function displayMessage(message) {
    if (authMessage) {
      authMessage.textContent = message;
    } else {
      console.log(message); // Fallback to console if no message element
    }
  }

  // 3. Listen for authentication state changes (this is super important!)
  // This function runs whenever the user's sign-in status changes.
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is signed in!
      displayMessage(`Welcome, ${user.email}! You're logged in.`);
      console.log("User signed in:", user.email);

      // redirect user to volunteer terminal, nesting their email in the URL
      window.location.href = "./volunteer_terminal.html?email=" + user.email;
    } else {
      // User is signed out.
      displayMessage("Please sign in.");
      console.log("No user signed in.");
      // Show the login form.
    }
  });

  // 4. Handle the form submission for signing in
  signInButton.addEventListener("click", async (event) => {
    event.preventDefault(); // Stop the browser from refreshing the page on form submission

    const email = EmailInput.value;
    const password = passwordInput.value;

    if (!email || !password) {
      displayMessage("Please enter both email and password.");
      return;
    }

    try {
      const userCredential = await signInWithEmailAndPassword(
        auth,
        email,
        password
      );
      // The onAuthStateChanged listener above will handle showing success message/UI updates.
      console.log("Sign-in successful!");
      passwordInput.value = ""; // Clear password field for security
    } catch (error) {
      // Handle specific errors for a better user experience
      let errorMessage = "An error occurred during sign-in.";
      switch (error.code) {
        case "auth/user-not-found":
          errorMessage = "No user found with this email.";
          break;
        case "auth/wrong-password":
          errorMessage = "Incorrect password.";
          break;
        case "auth/invalid-email":
          errorMessage = "Invalid email format.";
          break;
        default:
          errorMessage = `Error: ${error.message} (Code: ${error.code})`;
          break;
      }
      displayMessage(errorMessage);
      console.error("Sign-in error:", error.code, error.message);
    }
  });
</script>
</html>
